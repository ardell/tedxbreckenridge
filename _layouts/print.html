---
---
{%- comment -%}
Print layout - provides preview with print-ready styling,
plus source view for copying HTML and print functionality.
{%- endcomment -%}

{%- capture raw_content -%}{{ content }}{%- endcapture -%}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title }} | Print Preview</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Core TED Brand */
      --ted-red: #e4291c;
      --ted-red-dark: #C70022;
      --black: #000;
      --white: #FFF;

      /* Evergreen Palette */
      --teal: #3F6F6F;
      --forest: #4A7470;
      --charcoal: #2A2A2A;
      --stone: #676767;
      --cream: #F9F7F4;
      --sand: #E8E6E3;
      --teal-light: #A3C4C4;

      /* Typography */
      --font-primary: 'Helvetica Neue', helvetica, inter, arial, sans-serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-primary);
      font-weight: 400;
      background: var(--stone);
      color: var(--black);
      line-height: 1.6;
    }

    /* Navigation */
    .nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      padding: 20px 48px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--white);
      box-shadow: 0 1px 0 rgb(0 0 0 / 8%);
    }

    .nav-logo {
      display: flex;
      align-items: center;
      line-height: 0;
      text-decoration: none;
    }

    .nav-logo img {
      height: 40px;
      width: auto;
      display: block;
      vertical-align: middle;
      position: relative;
      top: 2px;
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .nav-link {
      font-size: 13px;
      font-weight: 400;
      color: var(--stone);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .nav-link:hover {
      color: var(--teal);
    }

    .nav-btn {
      font-family: var(--font-primary);
      font-size: 13px;
      font-weight: 500;
      padding: 12px 24px;
      background: var(--ted-red);
      color: var(--white);
      text-decoration: none;
      border: none;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .nav-btn:hover {
      background: var(--ted-red-dark);
    }

    /* Main Content */
    main {
      padding: 100px 48px 60px 48px;
    }

    /* Print Preview Frame - 8.5x11 aspect ratio */
    .print-frame {
      width: 100%;
      aspect-ratio: 8.5 / 11;
      background: transparent;
      overflow: hidden;
    }

    /* Slides Preview Frame - 1920x1080 scaled to viewport */
    .print-frame--slides {
      max-width: 1920px;
      aspect-ratio: auto;
      background: transparent;
      box-shadow: none;
      overflow: visible;
    }

    /* Table Tent Preview Frame - 4x18 aspect ratio */
    .print-frame--table-tent {
      aspect-ratio: 4 / 18;
      max-width: 400px;
    }

    /* Print Styles */
    @media print {
      body {
        background: none;
      }

      .nav,
      .source-view {
        display: none !important;
      }

      main {
        padding: 0;
      }

      .print-frame {
        width: 8.5in;
        height: 11in;
        aspect-ratio: auto;
        box-shadow: none;
      }

      .print-frame .flyer {
        transform: none !important;
      }

      .print-frame--table-tent {
        width: 4in;
        height: 18in;
      }

      .print-frame--table-tent .table-tent {
        transform: none !important;
      }
    }

    /* Mobile */
    @media screen and (max-width: 900px) {
      .nav {
        padding: 16px 24px;
      }

      .nav-logo img {
        height: 32px;
      }

      .nav-actions {
        gap: 16px;
      }

      .nav-link {
        display: none;
      }

      main {
        padding: 80px 24px 40px 24px;
      }

      .print-frame {
        width: 100%;
      }

      .print-frame--slides {
        width: 100%;
      }

      .source-view {
        margin: 0;
        padding: 24px;
      }

      .source-header h2 {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <nav class="nav">
    <a href="/" class="nav-logo">
      <img src="/assets/images/logos/tedx-breckenridge-logo-black.png" alt="TEDxBreckenridge">
    </a>
    <div class="nav-actions">
      <a href="/print/" class="nav-link">&larr; All Print Materials</a>
      <button class="nav-btn" onclick="window.print()">Print / Save PDF</button>
    </div>
  </nav>

  <main>
    <div class="print-frame{% if page.format contains 'Slides' or page.format contains '1920' %} print-frame--slides{% elsif page.format contains 'Table Tent' %} print-frame--table-tent{% endif %}" id="previewView">
      {{ raw_content }}
    </div>
  </main>

  <script>
  // Scale flyer content to fit container on screen (slides handle their own scaling)
  (function() {
    if (window.matchMedia('print').matches) return;

    var frame = document.querySelector('.print-frame:not(.print-frame--slides)');
    if (!frame) return;

    // Find the flyer element (may be outside frame due to nested HTML parsing)
    var flyer = document.querySelector('.flyer');
    if (!flyer) return;

    function scaleContent() {
      var containerWidth = frame.offsetWidth;
      // 8.5in = 816px at 96dpi
      var contentWidth = 816;
      var scale = containerWidth / contentWidth;

      flyer.style.transformOrigin = 'top left';
      flyer.style.transform = 'scale(' + scale + ')';
    }

    scaleContent();
    window.addEventListener('resize', scaleContent);
  })();
  </script>

</body>
</html>
